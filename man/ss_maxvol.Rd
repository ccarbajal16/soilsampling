% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/maxvol.R
\name{ss_maxvol}
\alias{ss_maxvol}
\title{Maxvol Optimal Design Sampling}
\usage{
ss_maxvol(
  x,
  n,
  features = NULL,
  coords = NULL,
  min_dist = NULL,
  normalize = TRUE,
  add_coords = TRUE,
  tol = 1.1,
  max_iters = 100,
  verbose = FALSE,
  seed = NULL
)
}
\arguments{
\item{x}{An \code{sf} object representing the study area with feature attributes,
OR a numeric matrix of features (rows = locations, columns = features).}

\item{n}{Integer, the number of sampling points to select.}

\item{features}{Character vector of feature names to use from \code{x} if it's
an sf object. If NULL, all numeric attributes are used.}

\item{coords}{Matrix (n_locations x 2) of coordinates. Required if \code{x} is
a matrix. If \code{x} is sf, coordinates are extracted automatically.}

\item{min_dist}{Numeric, minimum distance between sampling points. If NULL,
no distance constraint is applied.}

\item{normalize}{Logical, whether to normalize features before applying
maxvol (default TRUE). Recommended when features have different scales.}

\item{add_coords}{Logical, whether to add coordinates as features (default
TRUE). This helps balance feature space and geographic space.}

\item{tol}{Numeric, convergence tolerance for maxvol algorithm (default 1.1).}

\item{max_iters}{Integer, maximum iterations for maxvol (default 100).}

\item{verbose}{Logical, whether to print progress messages (default FALSE).}

\item{seed}{Optional integer seed for reproducibility.}
}
\value{
An object of class \code{ss_samples} containing:
\describe{
\item{samples}{An \code{sf} object with the sampling points.}
\item{method}{Character, "maxvol".}
\item{n_samples}{Integer, number of samples.}
\item{features_used}{Character vector of feature names used.}
\item{converged}{Logical, whether maxvol converged.}
\item{iterations}{Integer, number of maxvol iterations.}
\item{crs}{The coordinate reference system.}
}
}
\description{
Generates sampling points using the maxvol algorithm, which selects
locations by maximizing the determinant (volume) of a feature submatrix.
This is a D-optimal design approach that selects points with the most
diverse feature characteristics.
}
\details{
The maxvol algorithm selects sampling locations by finding a submatrix
of the feature matrix with approximately maximum determinant (volume).
Geometrically, this maximizes the volume of the parallelepiped spanned
by the selected feature vectors, ensuring that sampled locations have
maximal diversity in feature space.

The algorithm is based on D-optimal experimental design and is particularly
effective when:
\itemize{
\item Features explain the main soil-forming factors
\item You want deterministic (non-random) point selection
\item You need optimal coverage with few samples
}

\strong{Feature Selection:}
Terrain features typically used include:
\itemize{
\item Elevation
\item Slope
\item Aspect
\item Topographic Wetness Index (TWI)
\item Closed depressions
\item Flow accumulation
}

\strong{Distance Constraint:}
The \code{min_dist} parameter prevents spatial clustering. Points closer than
this distance will not be selected together. The value should be chosen
based on:
\itemize{
\item Study area size
\item Terrain ruggedness (more rugged = smaller min_dist)
\item Typical size of soil mapping units
}
}
\examples{
\dontrun{
library(sf)

# Create a study area with feature attributes
poly <- st_polygon(list(rbind(c(0, 0), c(100, 0), c(100, 50), c(0, 50), c(0, 0))))
study_area <- st_sf(geometry = st_sfc(poly))

# In practice, you would load terrain features from a DEM
# For this example, we'll use stratification cells with computed features
strata <- ss_stratify(study_area, n_strata = 100, n_try = 3)

# Add terrain-like features to cells
cells_sf <- strata$cells
coords <- st_coordinates(cells_sf)
cells_sf$elevation <- coords[,2] + rnorm(nrow(coords), 0, 5)
cells_sf$slope <- abs(rnorm(nrow(coords), 5, 2))

# Select 20 sampling points using maxvol
samples <- ss_maxvol(
  cells_sf,
  n = 20,
  features = c("elevation", "slope"),
  min_dist = 5,
  normalize = TRUE,
  add_coords = TRUE
)

# Plot results
ss_plot_samples(samples)
}

}
\references{
Petrovskaia, A., Ryzhakov, G., & Oseledets, I. (2021). Optimal soil
sampling design based on the maxvol algorithm. Geoderma, 383, 114733.
\doi{10.1016/j.geoderma.2020.114733}

Goreinov, S. A., Oseledets, I. V., Savostyanov, D. V., Tyrtyshnikov, E. E.,
& Zamarashkin, N. L. (2010). How to find a good submatrix. In Matrix
Methods: Theory, Algorithms And Applications (pp. 247-256). World Scientific.
}
\seealso{
\code{\link[=ss_coverage]{ss_coverage()}}, \code{\link[=ss_stratified]{ss_stratified()}}, \code{\link[=ss_random]{ss_random()}}
}
