% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stratify.R
\name{ss_stratify}
\alias{ss_stratify}
\title{Create Spatial Strata for Soil Sampling}
\usage{
ss_stratify(
  x,
  n_strata,
  prior_points = NULL,
  max_iter = 1000L,
  n_try = 1L,
  n_cells = 2500L,
  cell_size = NULL,
  equal_area = FALSE,
  verbose = FALSE
)
}
\arguments{
\item{x}{An \code{sf} object representing the study area. Can be a polygon
(POLYGON or MULTIPOLYGON) or point geometry (POINT or MULTIPOINT).}

\item{n_strata}{Integer, the number of strata to create.}

\item{prior_points}{Optional \code{sf} object with point geometry containing
locations that should be used as fixed cluster centers.}

\item{max_iter}{Integer, maximum number of iterations for the k-means
algorithm (default 1000).}

\item{n_try}{Integer, number of random initial configurations to try
(default 1). Higher values reduce risk of suboptimal local minima.}

\item{n_cells}{Integer, approximate number of grid cells to use when
discretizing a polygon (default 2500).}

\item{cell_size}{Numeric vector of length 1 or 2, cell size for
discretization. If provided, \code{n_cells} is ignored.}

\item{equal_area}{Logical, if \code{TRUE}, use the swopping algorithm to
create strata of equal area (default \code{FALSE}). Cannot be used with
prior points.}

\item{verbose}{Logical, whether to print progress messages (default \code{FALSE}).}
}
\value{
An object of class \code{ss_strata} containing:
\describe{
\item{cells}{An \code{sf} object with the grid cells and their stratum assignments.}
\item{centroids}{An \code{sf} object with the stratum centroids.}
\item{cell_size}{Numeric vector with cell dimensions.}
\item{n_strata}{Integer, number of strata.}
\item{mssd}{Numeric, mean squared shortest distance (objective function).}
\item{converged}{Logical, whether the algorithm converged.}
\item{prior_points}{The prior points if provided, otherwise NULL.}
\item{equal_area}{Logical, whether equal-area stratification was used.}
\item{crs}{The coordinate reference system.}
}
}
\description{
Partitions a study area into compact geographical strata using k-means
clustering. This is the foundation for spatial coverage sampling.
}
\details{
The function partitions the study area into compact spatial strata by
minimizing the mean squared shortest distance (MSSD) between grid cells
and their assigned cluster centroids.

Two algorithms are available:
\itemize{
\item \strong{Transfer algorithm} (default): Standard k-means, creates compact
strata of potentially unequal sizes.
\item \strong{Swop algorithm} (\code{equal_area = TRUE}): Creates compact strata
of equal size by swapping cells between clusters.
}
}
\examples{
\dontrun{
library(sf)

# Create a study area
poly <- st_polygon(list(rbind(c(0, 0), c(100, 0), c(100, 50), c(0, 50), c(0, 0))))
study_area <- st_sf(geometry = st_sfc(poly))

# Create 20 strata
strata <- ss_stratify(study_area, n_strata = 20, n_try = 5)
plot(strata)
}

}
\seealso{
\code{\link[=ss_coverage]{ss_coverage()}}, \code{\link[=ss_plot]{ss_plot()}}
}
